<div class="w-[200px] min-h-screen bg-[#91A2B4] text-[#1E1E1E] top-0 left-0 relative" data-controller="sidebar" data-action="click@window->sidebar#closeMenu">
  <nav class="flex flex-col justify-between h-fit">
    <div class="flex justify-between items-center p-4">
      <h1 class="kanit font-bold text-4xl">
        <%= link_to "Zuke", root_path %></h1>
      <button class="p-2 rounded-full hover:bg-gray-200 transition-colors" aria-label="Menu" data-action="click->sidebar#toggleMenu">
        <svg width="8" height="25" viewBox="0 0 8 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3.51562 8.59375C5.45898 8.59375 7.03125 10.166 7.03125 12.1094C7.03125 14.0527 5.45898 15.625 3.51562 15.625C1.57227 15.625 0 14.0527 0 12.1094C0 10.166 1.57227 8.59375 3.51562 8.59375ZM0 3.51562C0 5.45898 1.57227 7.03125 3.51562 7.03125C5.45898 7.03125 7.03125 5.45898 7.03125 3.51562C7.03125 1.57227 5.45898 0 3.51562 0C1.57227 0 0 1.57227 0 3.51562ZM0 20.7031C0 22.6465 1.57227 24.2188 3.51562 24.2188C5.45898 24.2188 7.03125 22.6465 7.03125 20.7031C7.03125 18.7598 5.45898 17.1875 3.51562 17.1875C1.57227 17.1875 0 18.7598 0 20.7031Z" fill="black"/>
        </svg>
      </button>
    </div>
    <!-- The dropdown menu -->
    <div class="absolute kanit left-full top-0 ml-2 w-48 bg-[#91A2B4] text-[#1E1E1E] shadow-lg rounded-md py-1 z-50 hidden"
          data-sidebar-target="menu">
      <ul>
        <li>
          <%= link_to "MILK-00", "#", class: "block px-4 py-2 text-gray-800 hover:bg-[#FFC9A4]" %>
        </li>
        <!-- Subtle separator with padding -->
        <li class="border-t border-gray-200 my-1"></li>
        <li>
          <%= link_to "Add Playlist", "#", class: "block px-4 py-2 text-gray-800 hover:bg-[#FFC9A4]" %>
        </li>
        <li>
          <%= link_to "Add Song", "#", class: "block px-4 py-2 text-gray-800 hover:bg-[#FFC9A4]" %>
        </li>
        <!-- More prominent separator with text -->
        <li class="relative py-1">
          <div class="absolute inset-0 flex items-center" aria-hidden="true">
            <div class="w-full border-t border-gray-300"></div>
          </div>
          <div class="relative flex justify-center">
            <span class="px-2 text-xs text-gray-500 bg-white rounded">Options</span>
          </div>
        </li>
        <li>
          <%= link_to "Settings", "#", class: "block px-4 py-2 text-gray-800 hover:bg-[#FFC9A4]" %>
        </li>
        <li>
          <%= link_to "About", music_about_path, data: { turbo_frame: "music-frame" }, class: "block px-4 py-2 text-gray-800 hover:bg-[#FFC9A4]" %>
        </li>
      </ul>
    </div>

    <div class="flex flex-col p-4">
      <h2 class="kanit">
        Menu
      </h2>
      <hr class="mb-3">
      <ul class="kanit">
        <li class="flex h-11 bg-[#FFC9A4] items-center rounded-sm p-1 hover:bg-[#FFC9A4]/50 transition-colors" data-sidebar-target="link"
        data-action="click->sidebar#setActive">
          <%= link_to music_index_path, data: { turbo_frame: "music-frame" }, class: "flex items-center text-base gap-2" do %>
            <svg width="25" height="20" viewBox="0 0 25 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12.1695 5.04384L4.16732 11.6345V18.7478C4.16732 18.932 4.24048 19.1086 4.37072 19.2389C4.50095 19.3691 4.67758 19.4423 4.86176 19.4423L9.72548 19.4297C9.90905 19.4288 10.0848 19.3552 10.2143 19.2251C10.3438 19.0949 10.4165 18.9188 10.4164 18.7352V14.5812C10.4164 14.397 10.4896 14.2204 10.6198 14.0901C10.7501 13.9599 10.9267 13.8867 11.1109 13.8867H13.8887C14.0728 13.8867 14.2495 13.9599 14.3797 14.0901C14.51 14.2204 14.5831 14.397 14.5831 14.5812V18.7322C14.5828 18.8236 14.6006 18.9141 14.6354 18.9986C14.6701 19.0831 14.7212 19.1599 14.7857 19.2247C14.8503 19.2894 14.9269 19.3407 15.0113 19.3758C15.0957 19.4108 15.1862 19.4288 15.2776 19.4288L20.1395 19.4423C20.3237 19.4423 20.5004 19.3691 20.6306 19.2389C20.7608 19.1086 20.834 18.932 20.834 18.7478V11.6298L12.8335 5.04384C12.7395 4.96802 12.6223 4.92668 12.5015 4.92668C12.3807 4.92668 12.2635 4.96802 12.1695 5.04384ZM24.8097 9.52344L21.1812 6.53255V0.520833C21.1812 0.3827 21.1263 0.250224 21.0287 0.152549C20.931 0.0548735 20.7985 0 20.6604 0H18.2298C18.0917 0 17.9592 0.0548735 17.8615 0.152549C17.7639 0.250224 17.709 0.3827 17.709 0.520833V3.67231L13.8231 0.47526C13.4502 0.168394 12.9823 0.000613431 12.4993 0.000613431C12.0164 0.000613431 11.5485 0.168394 11.1756 0.47526L0.189019 9.52344C0.136279 9.56703 0.0926449 9.62058 0.0606102 9.68104C0.0285755 9.7415 0.00876769 9.80768 0.00231864 9.8758C-0.0041304 9.94392 0.00290567 10.0126 0.0230248 10.078C0.043144 10.1434 0.0759519 10.2042 0.119574 10.2569L1.22634 11.6024C1.26985 11.6553 1.32336 11.6991 1.38381 11.7313C1.44426 11.7635 1.51047 11.7835 1.57864 11.79C1.64681 11.7966 1.71561 11.7897 1.7811 11.7696C1.84659 11.7496 1.90748 11.7168 1.96029 11.6732L12.1695 3.26432C12.2635 3.18851 12.3807 3.14717 12.5015 3.14717C12.6223 3.14717 12.7395 3.18851 12.8335 3.26432L23.0432 11.6732C23.0959 11.7168 23.1567 11.7496 23.2221 11.7697C23.2875 11.7898 23.3562 11.7969 23.4243 11.7904C23.4924 11.784 23.5586 11.7642 23.6191 11.7321C23.6795 11.7001 23.7331 11.6565 23.7767 11.6037L24.8835 10.2582C24.927 10.2052 24.9597 10.1441 24.9796 10.0784C24.9995 10.0128 25.0062 9.94379 24.9993 9.8755C24.9925 9.80722 24.9722 9.74096 24.9396 9.68054C24.9071 9.62012 24.8629 9.56673 24.8097 9.52344Z" fill="#1E1E1E"/>
            </svg>
            <span class="ms-3">Home</span>
          <% end %>
        </li>
        <li  class="flex h-11 items-center rounded-sm p-1 hover:bg-[#FFC9A4]/50 transition-colors" data-sidebar-target="link"
        data-action="click->sidebar#setActive">
          <%= link_to root_path, data: { turbo_frame: "music-frame" }, class: "flex items-center text-base gap-2" do %>
            <svg width="25" height="22" viewBox="0 0 25 22" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22.5738 1.49576C19.8981 -0.784512 15.9186 -0.374356 13.4625 2.15982L12.5006 3.15104L11.5387 2.15982C9.08751 -0.374356 5.10314 -0.784512 2.42736 1.49576C-0.639049 4.11295 -0.800182 8.81021 1.94396 11.6471L11.3922 21.403C12.0026 22.0329 12.9938 22.0329 13.6041 21.403L23.0524 11.6471C25.8014 8.81021 25.6402 4.11295 22.5738 1.49576Z" fill="#1E1E1E"/>
            </svg>
            <span class="ms-3">Loved</span>
          <% end %>
        </li>
        <li  class="flex h-11 items-center rounded-sm p-1 hover:bg-[#FFC9A4]/50 transition-colors" data-sidebar-target="link"
        data-action="click->sidebar#setActive">
          <%= link_to music_artists_path, data: { turbo_frame: "music-frame" }, class: "flex items-center text-base gap-2" do %>
            <svg width="25" height="20" viewBox="0 0 25 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20.625 17.5H4.375C4.03125 17.5 3.75 17.7812 3.75 18.125V19.375C3.75 19.7188 4.03125 20 4.375 20H20.625C20.9688 20 21.25 19.7188 21.25 19.375V18.125C21.25 17.7812 20.9688 17.5 20.625 17.5ZM23.125 5C22.0898 5 21.25 5.83984 21.25 6.875C21.25 7.15234 21.3125 7.41016 21.4219 7.64844L18.5938 9.34375C17.9922 9.70312 17.2148 9.5 16.8672 8.89062L13.6836 3.32031C14.1016 2.97656 14.375 2.46094 14.375 1.875C14.375 0.839844 13.5352 0 12.5 0C11.4648 0 10.625 0.839844 10.625 1.875C10.625 2.46094 10.8984 2.97656 11.3164 3.32031L8.13281 8.89062C7.78516 9.5 7.00391 9.70312 6.40625 9.34375L3.58203 7.64844C3.6875 7.41406 3.75391 7.15234 3.75391 6.875C3.75391 5.83984 2.91406 5 1.87891 5C0.84375 5 0 5.83984 0 6.875C0 7.91016 0.839844 8.75 1.875 8.75C1.97656 8.75 2.07812 8.73438 2.17578 8.71875L5 16.25H20L22.8242 8.71875C22.9219 8.73438 23.0234 8.75 23.125 8.75C24.1602 8.75 25 7.91016 25 6.875C25 5.83984 24.1602 5 23.125 5Z" fill="black"/>
            </svg>
            <span class="ms-3">Artist</span>
          <% end %>
        </li>
        <li  class="flex h-11 items-center rounded-sm p-1 hover:bg-[#FFC9A4]/50 transition-colors" data-sidebar-target="link"
        data-action="click->sidebar#setActive">
          <%= link_to root_path, data: { turbo_frame: "music-frame" }, class: "flex items-center text-base gap-2" do %>
            <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12.1094 0C5.41992 0 0 5.41992 0 12.1094C0 18.7988 5.41992 24.2188 12.1094 24.2188C18.7988 24.2188 24.2188 18.7988 24.2188 12.1094C24.2188 5.41992 18.7988 0 12.1094 0ZM4.29688 12.1094H2.73438C2.73438 6.93848 6.93848 2.73438 12.1094 2.73438V4.29688C7.80273 4.29688 4.29688 7.80273 4.29688 12.1094ZM12.1094 16.7969C9.52148 16.7969 7.42188 14.6973 7.42188 12.1094C7.42188 9.52148 9.52148 7.42188 12.1094 7.42188C14.6973 7.42188 16.7969 9.52148 16.7969 12.1094C16.7969 14.6973 14.6973 16.7969 12.1094 16.7969ZM12.1094 10.5469C11.2451 10.5469 10.5469 11.2451 10.5469 12.1094C10.5469 12.9736 11.2451 13.6719 12.1094 13.6719C12.9736 13.6719 13.6719 12.9736 13.6719 12.1094C13.6719 11.2451 12.9736 10.5469 12.1094 10.5469Z" fill="black"/>
            </svg>
            <span class="ms-3">Albums</span>
          <% end %>
        </li>
        <li  class="flex h-11 items-center rounded-sm p-1 hover:bg-[#FFC9A4]/50 transition-colors" data-sidebar-target="link"
        data-action="click->sidebar#setActive">
          <%= link_to root_path, data: { turbo_frame: "music-frame" }, class: "flex items-center text-base gap-2" do %>
            <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22.9678 0.0722778L7.34424 4.68605C7.02709 4.78567 6.74999 4.98384 6.5532 5.25176C6.35641 5.51968 6.2502 5.84337 6.25 6.17579V18.94C5.73835 18.8158 5.21399 18.7515 4.6875 18.7485C2.09961 18.7485 0 20.148 0 21.8735C0 23.5991 2.09961 24.9985 4.6875 24.9985C7.27539 24.9985 9.375 23.5991 9.375 21.8735V10.4634L21.875 6.80128V15.8154C21.3634 15.6908 20.839 15.6264 20.3125 15.6235C17.7246 15.6235 15.625 17.023 15.625 18.7485C15.625 20.4741 17.7246 21.8735 20.3125 21.8735C22.9004 21.8735 25 20.4746 25 18.7485V1.56105C24.9998 1.31575 24.9418 1.07396 24.8308 0.855237C24.7197 0.636512 24.5588 0.447 24.3609 0.30204C24.163 0.15708 23.9338 0.060743 23.6918 0.0208269C23.4497 -0.0190892 23.2017 -0.00146341 22.9678 0.0722778Z" fill="black"/>
            </svg>
            <span class="ms-3">Songs</span>
          <% end %>
        </li>
        <li  class="flex h-11 items-center rounded-sm p-1 hover:bg-[#FFC9A4]/50 transition-colors" data-sidebar-target="link"
        data-action="click->sidebar#setActive">
          <%= link_to music_playlists_path, data: { turbo_frame: "music-frame" }, class: "flex items-center text-base gap-2" do %>
            <svg width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.5312 0H2.34375C1.0498 0 0 0.953822 0 2.12946V17.7455C0 18.9212 1.0498 19.875 2.34375 19.875H19.5312C20.8252 19.875 21.875 18.9212 21.875 17.7455V2.12946C21.875 0.953822 20.8252 0 19.5312 0ZM7.8125 14.9062C7.8125 15.2984 7.46289 15.6161 7.03125 15.6161H5.46875C5.03711 15.6161 4.6875 15.2984 4.6875 14.9062V9.22768C4.6875 8.8355 5.03711 8.51786 5.46875 8.51786H7.03125C7.46289 8.51786 7.8125 8.8355 7.8125 9.22768V14.9062ZM12.5 14.9062C12.5 15.2984 12.1504 15.6161 11.7188 15.6161H10.1562C9.72461 15.6161 9.375 15.2984 9.375 14.9062V4.96875C9.375 4.57657 9.72461 4.25893 10.1562 4.25893H11.7188C12.1504 4.25893 12.5 4.57657 12.5 4.96875V14.9062ZM17.1875 14.9062C17.1875 15.2984 16.8379 15.6161 16.4062 15.6161H14.8438C14.4121 15.6161 14.0625 15.2984 14.0625 14.9062V12.067C14.0625 11.6748 14.4121 11.3571 14.8438 11.3571H16.4062C16.8379 11.3571 17.1875 11.6748 17.1875 12.067V14.9062Z" fill="black"/>
            </svg>
            <span class="ms-3">Playlists</span>
          <% end %>
        </li>
      </ul>
    </div>
    <div class="flex flex-col p-4">
      <h2 class="kanit">
        Top Loved
      </h2>
      <hr class="mb-3">
      <div>
        <% @songs.each.with_index do |song, index| %>
          <% break if index >= 3 %>
          <a href="#">
            <img class="rounded-full w-12 my-1" src="<%= song.song_image_url%>" alt="<%= song.title %>" />
          </a>
        <% end %>
      </div>
    </div>
    <%#= render "zuke/music/loved_section" %> <!-- Top loved songs -->
  </nav>
</div>